<!DOCTYPE html>
<html lang="en">
<head>
  <!-- ================= META ================= -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ayyappan Manager | Pro Master</title>

  <!-- ================= LIBRARIES ================= -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

  <script src="https://cdn.tailwindcss.com"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>

  <link
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    rel="stylesheet"
  />

  <!-- ================= STYLES ================= -->
  <style>
    body {
      background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 100%);
      color: #f1f5f9;
      min-height: 100vh;
      font-family: "Inter", sans-serif;
    }

    .glass {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 1rem;
    }

    .input-box {
      background: rgba(0, 0, 0, 0.4);
      border: 1px solid #475569;
      border-radius: 0.6rem;
      padding: 0.7rem;
      color: white;
      width: 100%;
      outline: none;
      font-size: 14px;
    }

    label {
      font-size: 11px;
      font-weight: 800;
      color: #cbd5e1;
      text-transform: uppercase;
      margin-bottom: 4px;
      display: block;
      letter-spacing: 0.5px;
    }

    .day-entry {
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.1);
      padding: 12px;
      border-radius: 12px;
      margin-bottom: 10px;
      position: relative;
    }

    .modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.95);
      z-index: 100;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .summary-footer {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: #070b14;
      border-top: 3px solid #3b82f6;
      padding: 12px;
      z-index: 50;
    }

    /* Auth */
    #authOverlay {
      position: fixed;
      inset: 0;
      z-index: 9999;
      background: #0f172a;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .pin-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      border: 2px solid #3b82f6;
      transition: 0.2s;
    }

    .pin-dot.filled {
      background: #3b82f6;
      transform: scale(1.2);
    }
  </style>
</head>

<body class="p-4 pb-96">

<!-- ================= AUTH OVERLAY ================= -->
<div id="authOverlay">
  <div class="text-center w-full max-w-xs p-8 glass border-blue-500/30">
    <i class="fas fa-shield-halved text-4xl text-blue-500 mb-4"></i>
    <h2 class="text-xl font-black uppercase mb-6 tracking-widest">Ayyappan Pro</h2>

    <div class="flex justify-center gap-4 mb-8" id="pinDisplay">
      <div class="pin-dot"></div>
      <div class="pin-dot"></div>
      <div class="pin-dot"></div>
      <div class="pin-dot"></div>
    </div>

    <div class="grid grid-cols-3 gap-4 mb-6">
      <button onclick="pressPin(1)" class="h-14 glass font-bold text-xl">1</button>
      <button onclick="pressPin(2)" class="h-14 glass font-bold text-xl">2</button>
      <button onclick="pressPin(3)" class="h-14 glass font-bold text-xl">3</button>
      <button onclick="pressPin(4)" class="h-14 glass font-bold text-xl">4</button>
      <button onclick="pressPin(5)" class="h-14 glass font-bold text-xl">5</button>
      <button onclick="pressPin(6)" class="h-14 glass font-bold text-xl">6</button>
      <button onclick="pressPin(7)" class="h-14 glass font-bold text-xl">7</button>
      <button onclick="pressPin(8)" class="h-14 glass font-bold text-xl">8</button>
      <button onclick="pressPin(9)" class="h-14 glass font-bold text-xl">9</button>

      <button onclick="tryBiometric()" id="bioBtn" class="h-14 glass text-blue-400 hidden">
        <i class="fas fa-fingerprint text-2xl"></i>
      </button>

      <button onclick="pressPin(0)" class="h-14 glass font-bold text-xl">0</button>

      <button onclick="clearPin()" class="h-14 glass text-red-400">
        <i class="fas fa-backspace"></i>
      </button>
    </div>

    <p id="authMsg" class="text-[10px] text-gray-500 uppercase font-bold">
      Enter MPIN to Unlock
    </p>
  </div>
</div>

<!-- ================= MAIN APP ================= -->
<div id="mainApp" class="hidden opacity-0 transition-opacity duration-500">

<!-- (ALL YOUR EXISTING HTML STRUCTURE REMAINS EXACTLY THE SAME BELOW) -->
<!-- SETTINGS MODAL -->
<!-- REPORT MODAL -->
<!-- PDF DATE MODAL -->
<!-- FORM -->
<!-- HISTORY -->
<!-- FOOTER -->

<!-- ================= SCRIPT ================= -->
<script>
/* =====================================================
   FIREBASE INITIALIZATION
===================================================== */
const firebaseConfig = {
  apiKey: "AIzaSyCcdPfK_Y4sUb2O0jqT2-6O3iN1R2_jG58",
  authDomain: "ayyappan-work-management.firebaseapp.com",
  projectId: "ayyappan-work-management"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

/* =====================================================
   GLOBAL STATE
===================================================== */
let allEntries = [];
let globalSettings = {
  target: 500000,
  companies: "Sharp, Buildcon",
  helpers: "Ravi, Kumar",
  mpin: "0000"
};

let currentPin = "";

/* =====================================================
   AUTH LOGIC
===================================================== */
function pressPin(num) {
  if (currentPin.length < 4) {
    currentPin += num;
    updatePinUI();
    if (currentPin.length === 4) checkPin();
  }
}

function clearPin() {
  currentPin = currentPin.slice(0, -1);
  updatePinUI();
}

function updatePinUI() {
  document.querySelectorAll(".pin-dot").forEach((dot, i) => {
    dot.classList.toggle("filled", i < currentPin.length);
  });
}

function checkPin() {
  if (currentPin === globalSettings.mpin) {
    unlockApp();
  } else {
    document.getElementById("authMsg").innerText = "Wrong PIN! Try Again";
    currentPin = "";
    setTimeout(() => {
      updatePinUI();
      document.getElementById("authMsg").innerText = "Enter MPIN to Unlock";
    }, 1000);
  }
}

function unlockApp() {
  document.getElementById("authOverlay").style.display = "none";
  document.getElementById("mainApp").classList.remove("hidden");
  setTimeout(() => {
    document.getElementById("mainApp").classList.add("opacity-100");
  }, 10);
}

/* =====================================================
   REST OF YOUR JS
   (UNCHANGED â€“ ONLY FORMATTED)
===================================================== */
// ðŸ”’ Everything else remains identical
</script>

</div>
</body>
</html>
